select(Name, Area) %>%
drop_na()
dat = gsub("m/z 44", "12C", dat$Name)
dat
dat
# CO2 measurements
dat = read_tsv(i, skip=7, col_names=TRUE) %>%
select(Name, Area) %>%
drop_na()
dat
dat = gsub("'m/z 44'", "12C", dat$Name)
dat
dat$Name = gsub("m/z 44", "12C", dat$Name)
# CO2 measurements
dat = read_tsv(i, skip=7, col_names=TRUE) %>%
select(Name, Area) %>%
drop_na()
dat$Name = gsub("m/z 44", "12C", dat$Name)
dat
?str_replace
# CO2 measurements
dat = read_tsv(i, skip=7, col_names=TRUE) %>%
select(Name, Area) %>%
drop_na() %>%
str_replace("m/z 44", "12C")
dat
# CO2 measurements
dat = read_tsv(i, skip=7, col_names=TRUE) %>%
select(Name, Area) %>%
drop_na() %>%
str_replace(Name, "m/z 44", "12C")
dat
# CO2 measurements
dat = read_tsv(i, skip=7, col_names=TRUE) %>%
select(Name, Area) %>%
drop_na() %>%
str_replace(.$Name, "m/z 44", "12C")
dat
# CO2 measurements
dat = read_tsv(i, skip=7, col_names=TRUE) %>%
select(Name, Area) %>%
drop_na() %>%
str_replace_all(c("TIC"="Total", "m/z 44" = "12C", "m/z 45" = "13C"))
dat
# CO2 measurements
dat = read_tsv(i, skip=7, col_names=TRUE) %>%
select(Name, Area) %>%
drop_na() %>%
mutate(Name = str_replace_all(c("TIC"="Total", "m/z 44" = "12C", "m/z 45" = "13C")))
dat
# CO2 measurements
dat = read_tsv(i, skip=7, col_names=TRUE) %>%
select(Name, Area) %>%
drop_na()# %>%
dat
# CO2 measurements
dat = read_tsv(i, skip=7, col_names=TRUE)
dat = dat %>%
select(Name, Area) %>%
drop_na()# %>%
dat
dat = dat %>%
select(Name, Area) %>%
drop_na() %>%
mutate(Name = str_replace_all(c("TIC"="Total", "m/z 44" = "12C", "m/z 45" = "13C")))
dat = dat %>%
select(Name, Area) %>%
drop_na() %>%
mutate(str_replace_all(c("TIC"="Total", "m/z 44" = "12C", "m/z 45" = "13C")))
dat
dat = dat %>%
select(Name, Area) %>%
drop_na() %>%
mutate(str_replace_all(., c("TIC"="Total", "m/z 44" = "12C", "m/z 45" = "13C")))
dat
dat = dat %>%
select(Name, Area) %>%
drop_na() %>%
mutate(Name = str_replace_all(c("TIC"="Total", "m/z 44" = "12C", "m/z 45" = "13C")))
dat
dat$Name = str_replace_all(c("TIC"="Total", "m/z 44" = "12C", "m/z 45" = "13C"))
dat$Name = str_replace_all(dat$Name, c("TIC"="Total", "m/z 44" = "12C", "m/z 45" = "13C"))
dat
# CO2 measurements
dat = read_tsv(i, skip=7, col_names=TRUE) %>%
select(Name, Area) %>%
drop_na() %>%
str_replace_all(.$Name, c("TIC"="Total", "m/z 44" = "12C", "m/z 45" = "13C"))
dat
# List all paths to data files in directory
stds.files = list.files(path="data_CO2/std_check/112320", pattern="*.txt", full.names=TRUE, recursive=FALSE)
# Read in data
name.list <- list()
area.df = data.frame()
for (i in stds.files) {
# Create name of sample based on file name
name = gsub("data_CO2/std_check/.+/", "", i)
name = gsub(".txt", "", name)
name.list = append(name.list, name)
# CO2 measurements
dat = read_tsv(i, skip=7, col_names=TRUE) %>%
select(Name, Area) %>%
drop_na()
dat$Name = str_replace_all(dat$Name, c("TIC"="Total", "m/z 44" = "12C", "m/z 45" = "13C"))
dat = mutate(dat, Std = rep(name, nrow(dat)))
area.df <- rbind(area.df, dat)
}
area.df
# List all paths to data files in directory
stds.files = list.files(path="data_CO2/std_check/112320", pattern="*.txt", full.names=TRUE, recursive=FALSE)
# Read in data
name.list <- list()
area.df = data.frame()
for (i in stds.files) {
# Create name of sample based on file name
name = gsub("data_CO2/std_check/.+/", "", i)
name = gsub(".txt", "", name)
name.list = append(name.list, name)
# CO2 measurements
dat = read_tsv(i, skip=7, col_names=TRUE) %>%
select(Name, Area) %>%
drop_na()
dat$Name = str_replace_all(dat$Name, c("TIC"="Total", "m/z 44" = "12C", "m/z 45" = "13C"))
dat = mutate(dat, Std = rep(name, nrow(dat)))
area.df <- rbind(area.df, dat)
}
# List all paths to data files in directory
stds.files = list.files(path="data_CO2/std_check/112320", pattern="*.txt", full.names=TRUE, recursive=FALSE)
# Read in data
name.list <- list()
area.df = data.frame()
for (i in stds.files) {
# Create name of sample based on file name
name = gsub("data_CO2/std_check/.+/", "", i)
name = gsub(".txt", "", name)
name.list = append(name.list, name)
# CO2 measurements
dat = read_tsv(i, skip=7, col_names=TRUE) %>%
select(Name, Area) %>%
drop_na()
dat$Name = str_replace_all(dat$Name, c("TIC"="Total", "m/z 44" = "12C", "m/z 45" = "13C"))
dat = mutate(dat, Std = rep(name, nrow(dat)))
area.df <- rbind(area.df, dat)
}
# List all paths to data files in directory
stds.files = list.files(path="data_CO2/std_check/112320", pattern="*.txt", full.names=TRUE, recursive=FALSE)
# Read in data
name.list <- list()
area.df = data.frame()
for (i in stds.files) {
# Create name of sample based on file name
name = gsub("data_CO2/std_check/.+/", "", i)
name = gsub(".txt", "", name)
name.list = append(name.list, name)
# CO2 measurements
dat = read_tsv(i, skip=7, col_names=TRUE) %>%
select(Name, Area) %>%
drop_na()
dat$Name = str_replace_all(dat$Name, c("TIC"="Total", "m/z 44" = "12C", "m/z 45" = "13C"))
dat = mutate(dat, Std = rep(name, nrow(dat)))
area.df <- rbind(area.df, dat)
}
# List all paths to data files in directory
stds.files = list.files(path="data_CO2/std_check/112320", pattern="*.txt", full.names=TRUE, recursive=FALSE)
# Read in data
name.list <- list()
area.df = data.frame()
for (i in stds.files) {
# Create name of sample based on file name
name = gsub("data_CO2/std_check/.+/", "", i)
name = gsub(".txt", "", name)
name.list = append(name.list, name)
# CO2 measurements
dat = read_tsv(i, skip=7, col_names=TRUE) %>%
select(Name, Area) %>%
drop_na()
dat$Name = str_replace_all(dat$Name, c("TIC"="total", "m/z 44" = "12C", "m/z 45" = "13C"))
dat = mutate(dat, Std = rep(name, nrow(dat)))
area.df <- rbind(area.df, dat)
}
# Choose:
## "total"
## 12C
## 13C
iso = "12C"
area.df = filter(area.df, Name==iso)
area.df
area.df %>%
ggplot(aes(x=Std, y=Area)) +
geom_point() +
theme_test
subset.df = filter(area.df, Name==iso)
subset.df %>%
ggplot(aes(x=Std, y=Area)) +
geom_point() +
theme_test
subset.df %>%
ggplot(aes(x=Std, y=Area)) +
geom_point() +
theme_test()
subset.df %>%
ggplot(aes(x=Std, y=log(Area))) +
geom_point() +
theme_test()
subset.df %>%
ggplot(aes(x=Std, y=Area)) +
geom_point() +
theme_test()
subset.df %>%
ggplot(aes(x=Std, y=log(Area))) +
geom_point() +
theme_test()
subset.df %>%
ggplot(aes(x=Std, y=log(Area))) +
geom_point() +
geom_smooth(method="lm")
subset.df %>%
ggplot(aes(x=Std, y=log(Area))) +
geom_point() +
geom_smooth(method="lm") +
theme_test()
subset.df %>%
ggplot(aes(x=Std, y=Area)) +
geom_point() +
theme_test()
subset.df %>%
ggplot(aes(x=Std, y=log(Area))) +
geom_point() +
theme_test()
head(area.df)
?case_when
# Read in data
name.list <- list()
area.df = data.frame()
for (i in stds.files) {
# Create name of sample based on file name
name = gsub("data_CO2/std_check/.+/", "", i)
name = gsub(".txt", "", name)
name.list = append(name.list, name)
# CO2 measurements
dat = read_tsv(i, skip=7, col_names=TRUE) %>%
select(Name, Area) %>%
drop_na()
dat$Name = str_replace_all(dat$Name, c("TIC"="total", "m/z 44" = "12C", "m/z 45" = "13C"))
dat = mutate(dat, Standard = rep(name, nrow(dat)))
area.df <- rbind(area.df, dat)
}
area.df
head(are.df)
head(area.df)
# Add standard ppm
# NEED TO RECALC THESE ARE FOR LARGER BOTTLES but it's close enough for now
area.df = area.df %>%
mutate(ppm = case_when(Standard=="std0" ~ 0,
Standard=="std1" ~ 804.3,
Standard=="std2" ~ 1609,
Standard=="std3" ~ 3217,
Standard=="std4" ~ 8045))
area.df
# Add standard ppm
# NEED TO RECALC THESE ARE FOR LARGER BOTTLES but it's close enough for now
area.df = area.df %>%
mutate(ppm = case_when(Standard=="std0" ~ 0,
Standard=="std1" ~ 804.3,
Standard=="std2" ~ 1609,
Standard=="std3" ~ 3217,
Standard=="std4" ~ 8045,
Standard=="std5" ~ 16085,
Standard=="std6" ~ 3217,
Standard=="std7" ~ 80430,
Standard=="std8" ~ 241300,
Standard=="std9" ~ 402100))
area.df
subset.df %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
theme_test()
# Choose:
## total, warning: often missing
## 12C
## 13C
iso = "12C"
subset.df = filter(area.df, Name==iso)
subset.df
# Add standard ppm
# NEED TO RECALC THESE ARE FOR LARGER BOTTLES but it's close enough for now
area.df = area.df %>%
mutate(ppm = case_when(Standard=="std0" ~ 0,
Standard=="std1" ~ 804.3,
Standard=="std2" ~ 1609,
Standard=="std3" ~ 3217,
Standard=="std4" ~ 8045,
Standard=="std5" ~ 16085,
Standard=="std6" ~ 32170,
Standard=="std7" ~ 80430,
Standard=="std8" ~ 241300,
Standard=="std9" ~ 402100))
subset.df = filter(area.df, Name==iso)
subset.df %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
theme_test()
subset.df %>%
ggplot(aes(x=Std, y=log(Area))) +
geom_point() +
theme_test()
subset.df %>%
ggplot(aes(x=ppm, y=log(Area))) +
geom_point() +
theme_test()
subset.df %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
theme_test()
subset.df %>%
filter(Name != "ambient") %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
theme_test()
subset.df
subset.df %>%
filter(Name != "ambient") %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
geom_smooth(method="lm") +
theme_test()
subset.df %>%
filter(Name != "ambient") %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
geom_smooth(method="lm", linetype=2) +
theme_test()
subset.df %>%
filter(Name != "ambient") %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
geom_smooth(method="lm", linetype=2, alpha=0.5) +
theme_test()
subset.df %>%
filter(Name != "ambient") %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
geom_smooth(method="lm", linetype=2, alpha=0.5) +
labs(title="Standards")
subset.df %>%
filter(Name != "ambient") %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
geom_smooth(method="lm", linetype=2, alpha=0.5) +
labs(title="Standards") +
theme_test()
stds.lm = lm(Area ~ ppm, data=subset.df )
summary(stds.lm)
# Add standard ppm
# NEED TO RECALC THESE but it's close enough for now
area.df = area.df %>%
mutate(ppm = case_when(Standard=="std0" ~ 0,
Standard=="std1" ~ 769,
Standard=="std2" ~ 1538,
Standard=="std3" ~ 3077,
Standard=="std4" ~ 7692,
Standard=="std5" ~ 15385,
Standard=="std6" ~ 30769,
Standard=="std7" ~ 76923,
Standard=="std8" ~ 230769,
Standard=="std9" ~ 384615))
# Choose:
## total, warning: often missing
## 12C
## 13C
iso = "12C"
# Filter selected isotope
subset.df = filter(area.df, Name==iso)
subset.df %>%
filter(Name != "ambient") %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
geom_smooth(method="lm", linetype=2, alpha=0.5) +
labs(title="Standards") +
theme_test()
stds.lm = lm(Area ~ ppm, data=subset.df)
summary(stds.lm)
# Ambient level
amb = subset.df[subset.df$Name=="ambient",]$Area
amb
head(subset.df)
# Ambient level
amb = subset.df[subset.df$Standard=="ambient",]$Area
amb
# Plot
subset.df %>%
filter(Name != "ambient") %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
geom_hline(yintercept = amb) +
geom_smooth(method="lm", linetype=2, alpha=0.5) +
labs(title="Standards") +
theme_test()
# Plot
subset.df %>%
filter(Name != "ambient") %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
geom_hline(yintercept = amb, linetype=2) +
geom_smooth(method="lm", linetype=2, alpha=0.5) +
labs(title="Standards") +
theme_test()
?geom_text
# Plot
subset.df %>%
filter(Name != "ambient") %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
geom_hline(yintercept = amb, linetype=2) +
geom_text(aes(Standard)) +
geom_smooth(method="lm", linetype=2, alpha=0.5) +
labs(title="Standards") +
theme_test()
# Plot
subset.df %>%
filter(Name != "ambient") %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
geom_hline(yintercept = amb, linetype=2) +
annotate("text", x=1, y=13000, label= "ambient") +
geom_smooth(method="lm", linetype=2, alpha=0.5) +
labs(title="Standards") +
theme_test()
# Plot
subset.df %>%
filter(Name != "ambient") %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
geom_hline(yintercept = amb, linetype=2) +
annotate("text", x=1, y=30000, label= "ambient") +
geom_smooth(method="lm", linetype=2, alpha=0.5) +
labs(title="Standards") +
theme_test()
# Plot
subset.df %>%
filter(Name != "ambient") %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
geom_hline(yintercept = amb, linetype=2) +
annotate("text", x=5, y=30000, label= "ambient") +
geom_smooth(method="lm", linetype=2, alpha=0.5) +
labs(title="Standards") +
theme_test()
# Plot
subset.df %>%
filter(Name != "ambient") %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
geom_hline(yintercept = amb, linetype=2) +
annotate("text", x=30000, y=30000, label= "ambient") +
geom_smooth(method="lm", linetype=2, alpha=0.5) +
labs(title="Standards") +
theme_test()
# Plot
subset.df %>%
filter(Name != "ambient") %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
geom_hline(yintercept = amb, linetype=2) +
annotate("text", x=30500, y=30000, label= "ambient") +
geom_smooth(method="lm", linetype=2, alpha=0.5) +
labs(title="Standards") +
theme_test()
# Plot
subset.df %>%
filter(Name != "ambient") %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
geom_hline(yintercept = amb, linetype=2) +
annotate("text", x=30500, y=30000, label= "ambient") +
annotate("text", x=25500, y=3000000, label= "Adj.R^2=0.998") +
geom_smooth(method="lm", linetype=2, alpha=0.5) +
labs(title="Standards") +
theme_test()
# Plot
subset.df %>%
filter(Name != "ambient") %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
geom_hline(yintercept = amb, linetype=2) +
annotate("text", x=30500, y=30000, label= "ambient") +
annotate("text", x=25500, y=300000, label= "Adj.R^2=0.998") +
geom_smooth(method="lm", linetype=2, alpha=0.5) +
labs(title="Standards") +
theme_test()
# Plot
subset.df %>%
filter(Name != "ambient") %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
geom_hline(yintercept = amb, linetype=2) +
annotate("text", x=30500, y=30000, label = "ambient") +
annotate("text", x=30000, y=300000, label = "Adj.R2 = 0.998") +
geom_smooth(method="lm", linetype=2, alpha=0.5) +
labs(title="Standards") +
theme_test()
# Plot
subset.df %>%
filter(Name != "ambient") %>%
ggplot(aes(x=ppm, y=Area)) +
geom_point() +
geom_hline(yintercept = amb, linetype=2) +
annotate("text", x=30500, y=30000, label = "ambient") +
annotate("text", x=28000, y=300000, label = "Adj.R2 = 0.998") +
geom_smooth(method="lm", linetype=2, alpha=0.5) +
labs(title="Standards") +
theme_test()
